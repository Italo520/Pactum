<!-- templates/base/sidebar.html -->
{% load static %}
<aside id="sidebarMenu" class="w-64 bg-gray-800 text-white min-h-screen p-4 md:block hidden">
    <!-- Logo -->
    <div class="flex items-center justify-center mb-6">
        <a href="{% url 'dashboard:index' %}" class="flex items-center">
            <img src="{% static 'img/logo_pactum.png' %}" alt="Pactum Logo" class="h-12 w-auto">
            <span class="text-2xl font-bold ml-2">Pactum</span>
        </a>
    </div>

    <!-- Navigation -->
    <nav>
        <ul>
            <!-- Dashboard -->
            <li>
                <a href="{% url 'dashboard:index' %}" class="flex items-center px-4 py-2 rounded-md hover:bg-gray-700 {% if 'dashboard' in request.resolver_match.url_name %}bg-gray-700{% endif %}">
                    <i class="fas fa-tachometer-alt w-6"></i>
                    <span class="ml-3">Dashboard</span>
                </a>
            </li>

            <!-- Projetos -->
            {% if user.can_manage_projects or user.is_cliente %}
            <li class="mt-4">
                <h5 class="px-4 text-sm font-semibold text-gray-400 uppercase tracking-wider">Projetos</h5>
                <ul class="mt-2">
                    <li>
                        <a href="{% url 'projetos:projeto_list' %}" class="flex items-center px-4 py-2 rounded-md hover:bg-gray-700 {% if 'projeto' in request.resolver_match.url_name %}bg-gray-700{% endif %}">
                            <i class="fas fa-list w-6"></i>
                            <span class="ml-3">Listar Projetos</span>
                        </a>
                    </li>
                    {% if user.can_manage_projects %}
                    <li>
                        <a href="{% url 'projetos:projeto_create' %}" class="flex items-center px-4 py-2 rounded-md hover:bg-gray-700">
                            <i class="fas fa-plus w-6"></i>
                            <span class="ml-3">Novo Projeto</span>
                        </a>
                    </li>
                    {% endif %}
                </ul>
            </li>
            {% endif %}

            <!-- Contratos -->
            {% if user.can_manage_contracts %}
            <li class="mt-4">
                <h5 class="px-4 text-sm font-semibold text-gray-400 uppercase tracking-wider">Contratos</h5>
                <ul class="mt-2">
                    <li>
                        <a href="{% url 'contratos:contrato_list' %}" class="flex items-center px-4 py-2 rounded-md hover:bg-gray-700 {% if 'contrato' in request.resolver_match.url_name %}bg-gray-700{% endif %}">
                            <i class="fas fa-file-contract w-6"></i>
                            <span class="ml-3">Contratos</span>
                        </a>
                    </li>
                    <li>
                        <a href="{% url 'contratos:prestador_list' %}" class="flex items-center px-4 py-2 rounded-md hover:bg-gray-700">
                            <i class="fas fa-users w-6"></i>
                            <span class="ml-3">Prestadores</span>
                        </a>
                    </li>
                    <li>
                        <a href="{% url 'contratos:parcela_list' %}" class="flex items-center px-4 py-2 rounded-md hover:bg-gray-700">
                            <i class="fas fa-money-bill-wave w-6"></i>
                            <span class="ml-3">Parcelas</span>
                        </a>
                    </li>
                </ul>
            </li>
            {% endif %}

            <!-- Clientes -->
            {% if user.can_manage_contracts %}
            <li class="mt-4">
                <h5 class="px-4 text-sm font-semibold text-gray-400 uppercase tracking-wider">Clientes</h5>
                <ul class="mt-2">
                    <li>
                        <a href="{% url 'clientes:cliente-list' %}" class="flex items-center px-4 py-2 rounded-md hover:bg-gray-700 {% if 'cliente' in request.resolver_match.url_name %}bg-gray-700{% endif %}">
                            <i class="fas fa-users w-6"></i>
                            <span class="ml-3">Listar Clientes</span>
                        </a>
                    </li>
                </ul>
            </li>
            {% endif %}

            <!-- Financeiro -->
            {% if user.can_view_financial_data %}
            <li class="mt-4">
                <h5 class="px-4 text-sm font-semibold text-gray-400 uppercase tracking-wider">Financeiro</h5>
                <ul class="mt-2">
                    <li>
                        <a href="{% url 'dashboard:analytics_financeiro' %}" class="flex items-center px-4 py-2 rounded-md hover:bg-gray-700">
                            <i class="fas fa-chart-line w-6"></i>
                            <span class="ml-3">Analytics</span>
                        </a>
                    </li>
                    <li>
                        <a href="{% url 'pagamentos:payment_history' %}" class="flex items-center px-4 py-2 rounded-md hover:bg-gray-700">
                            <i class="fas fa-credit-card w-6"></i>
                            <span class="ml-3">Pagamentos</span>
                        </a>
                    </li>
                </ul>
            </li>
            {% endif %}

            <!-- Relat贸rios -->
            {% if user.can_generate_reports %}
            <li class="mt-4">
                <h5 class="px-4 text-sm font-semibold text-gray-400 uppercase tracking-wider">Relat贸rios</h5>
                <ul class="mt-2">
                    <li>
                        <a href="{% url 'relatorios:relatorio_list' %}" class="flex items-center px-4 py-2 rounded-md hover:bg-gray-700">
                            <i class="fas fa-file-alt w-6"></i>
                            <span class="ml-3">Relat贸rios</span>
                        </a>
                    </li>
                     <li>
                        <a href="{% url 'relatorios:relatorio_custom' %}" class="flex items-center px-4 py-2 rounded-md hover:bg-gray-700">
                            <i class="fas fa-chart-bar w-6"></i>
                            <span class="ml-3">Relat贸rio Customizado</span>
                        </a>
                    </li>
                </ul>
            </li>
            {% endif %}

        </ul>
    </nav>
</aside>